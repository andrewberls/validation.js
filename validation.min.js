(function() {
  var isValid;

  window.ValidateJS = {
    formClass: 'form-validate',
    errClass: 'field-error',
    enableActiveChecking: false,
    inputTypes: 'input[type=text],input[type=email],input[type=password],textarea'
  };

  isValid = function($field) {
    var val;
    val = $field.val();
    if ($field.data('validate-type') === 'number') {
      return !(isNaN(parseInt(val)));
    } else {
      return val !== '';
    }
  };

  $(function() {
    var $form, errClass, formClass, inputTypes;
    formClass = ValidateJS.formClass;
    errClass = ValidateJS.errClass;
    inputTypes = ValidateJS.inputTypes;
    $form = $("." + formClass);
    $form.submit(function() {
      var $field, errors, field, shouldValidate, validateFlag, _i, _len, _ref;
      errors = false;
      _ref = $(this).find(inputTypes);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        field = _ref[_i];
        $field = $(field).removeClass(errClass);
        validateFlag = $field.data('validate');
        shouldValidate = validateFlag != null ? validateFlag : true;
        if (shouldValidate && !isValid($field)) {
          errors = true;
          $field.addClass(errClass);
        }
      }
      return !errors;
    });
    $(document).on('keyup', "." + errClass, function() {
      if ($(this).val()) {
        return $(this).removeClass(errClass);
      }
    });
    if (ValidateJS.enableActiveChecking) {
      return $form.find(inputTypes).on('blur', function() {
        var $field;
        $field = $(this);
        if (!isValid($field)) {
          return $field.addClass(errClass);
        }
      });
    }
  });

}).call(this);
